/**
 * sutility v0.0.1 - 2015-06-18
 * Functional Library
 *
 * Copyright (c) 2015 soushinas noorghorbani <snoorghorbani@gmail.com>
 * Licensed MIT
 */

(function(a){"use strict";var b=!0,c=function(){var c=function(){var c=this;this.merge=function(a,b){this.is.object(b)?this.each(b,function(c,d){a[d]=b[d]}):this.is.array(b)&&this.each(b,function(b){a.push(b)})},this.update=function(b,c,d){return this.is.object(c)&&this.each(b,function(d,e){c[e]!==a&&(b[e]=c[e])}),b},this.extend=function(a,b,c){return this.is.not.defined(a)&&this.fail("destination object cant be null"),this.is.array(a)?this.safeAssignArray(a,b):this.is.object(a)?(this.safeClear(a),this.each(b,function(b,c){a[c]=b},this,c)):a=b,a},this.assignIfDefined=function(b,d){return d!==a?c.safeAssign(b,d):b},this.assignIfNotDefined=function(b,c){return b===a?c:b},this.upsert=function(a,d,e,f){b&&this.not(this.is.array,a);var g=!0;this.each(a,function(b,f){e(b)&&(g=!1,c.safeAssign(a[f],d))});g&&a.push(d)},this.cloneObj=function(a,b){b=this.assignIfNotDefined(b,!0);var c=this.object();for(var d in a)(b||a.hasOwnProperty(d))&&(c[d]=a[d]);return c},this.cloneArray=function(a){return a.concat()},this.clone=function(a){if(a.concat)return a.concat();var b={};for(var c in a)b[c]=a[c];return b},this.each=function(a,b,c,d){if(d=this.assignIfNotDefined(d,!1),!a)return!1;this.is.nodeList(a)&&this.each(this.argToArray(a),b,c);var e;if(this.is.array(a)||this.is["function"](a))for(e in a)(a.hasOwnProperty(e)||d)&&b.call(c,a[e],e);if(this.is.object(a))for(e in a)(a.hasOwnProperty(e)||d)&&b.call(c,a[e],e)},this.map=function(a,b,c){var d=[];return this.each(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d};this.filter=function(a,b){var c=[];return this.each(a,function(a){b(a)&&c.push&&c.push(a)}),c};this.fine=function(a,b){var c=!0;return _.each(a,function(a){b(a)||(c=!1)}),c},this.indexOf=function(a,b,c){var d;return this.is["function"](b)?this.each(a,function(a,e){b.call(c,a)&&(d=e)}):d=a.indexOf(b),d},this.repeat=function(a,b,c){for(var d=[],e=0;a>e;e++)d.push(b.call(c));return d},this.extendFunc=function(a,b){var c=arguments[2];return function(){a.call(this),b.call(this,c)}},this.runOnce=function(){},this.arc=function(a,b,c,d,e,f,g){a.beginPath(),a.arc(b,c,d,e,f,g),a.closePath(),a.fill(),a.stroke()},this.rect=function(a,b,c,d,e,f,g){a.beginPath(),a.rect(b,c,d,e),a.closePath(),f!==!1&&a.fill(),g!==!1&&a.stroke()},this.text=function(a,b,c,d){a.beginPath(),a.fillText(b,c,d),a.fill(),a.closePath()},this.line=function(a,b,c){a.beginPath(),a.moveTo(b.x,b.y),a.lineTo(c.x,c.y),a.closePath(),a.stroke()},this.argToArray=function(a){return Array.prototype.slice.call(a)},this.concat=function(a,b){return this.not(this.is.array,a)&&this.fail("is Not Array"),this.not(this.is.array,b)&&this.fail("is Not Array"),a.concat(b)},this.complement=function(a){return function(){return!a.apply(null,this.argToArray(arguments))}},this.not=function(a){var b=this.argToArray(arguments);return b.shift(),!a.apply(this,b)},this.reverseArray=function(a){this.not(this.is.array,a)&&this.fail("is Not Array");for(var b=[],c=a.length-1,d=0;c>=0;c--,d++)b[d]=a[c];return b},this.fail=function(a){throw new Error(a)},this.warn=function(b){return a},this.note=function(a){},this.remove=function(a,b){return this.not(this.is.array,a)&&this.fail("is Not Array"),a.length<b&&this.fail("greeter that array length"),a=a.splice(b,1)},this.compileString=function(a,b,c){var d=/\{\{/,e=[],f=a.search(d);if(f>-1){e[e.length]=a.substring(0,f),a=a.substring(f);var g=a.search(/\}\}/),h=a.substring(2,g),i=b[h.trim()];this.is.object(i)&&(i=c.call(null,i)),e[e.length]=i,a=a.substring(g+2),e=e.concat(this.compileString(a,b,c))}else e[e.length]=a;return e.join("")},this.haveKey=function(a,b){this.not(this.is.object,a)&&this.warn("is Not Object");for(var c,d=a,e=b.split("."),f=0;c=e[f];f++){if(!d[c]&&0!==d[c])return this.warn(["dont have ",c,"property"].join(" ")),!1;this.is.not.array(d[c])&&(d=d[c])}return!0},this.valueOf=function(a,b){var c;if(this.is.array(a))return a[b];c=a;for(var d,e=b.split("."),f=0;d=e[f];f++){if(!c[d])return this.warn(["dont have ",d,"property"].join(" ")),null;if(this.is.array(c[d])){for(var g,h={},i=e.splice(f+1),j=0;g=c[d][j];j++)h[j]=this.getValue2(g,i.join("."));return h}c=c[d]}return c},this.getValue=function(b,c){if(!b)return a;if(!b)return this.warn("UTILITY getValue function first parameter not defined");if(null!==b[c])return b[c];c=c.split(".");for(var d=0,e=b[c[d++]];d<c.length;)e=e[c[d++]];return d==c.length?e:null},this.toString=function(a){this.not(this.is.object,a)&&this.fail("is not object");var b="";for(var c in a)this.is.object(a[c])?b+=this.toString(a[c]):(b+=" , ",b+=a[c]);return b},this["interface"]=function(a,b){},this.multiply=function(a,b){return a*b},this.leftCurry=function(a,b){return b=b||c,function(){var d=c.argToArray(arguments);return function(){var e=c.concat(d,c.argToArray(arguments));return a.apply(b,e)}}},this.rightCurry=function(a){return function(){var b=c.argToArray(arguments);return function(){var d=c.concat(c.argToArray(arguments),b);return a.apply(c,d)}}},this.random=function(a,b){return(b-a)*Math.random()+a},this.runInFunc=function(a){return this.not(this.is["function"],a)&&this.warn(a+"is not function"),function(){a()}},this.randJson=function(a,b){var c=[];return this.repeat(a,function(){var a={};this.each(b,function(b){"string"==b.type?a[b.name]=this.randString(6):"number"==b.type&&(a[b.name]=this.random(0,9))},this),c.push(a)},this),c},this.randString=function(a){var b="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";return this.repeat(a,function(){b+=c[this.random(0,c.length).toFixed()]},this),b},this.randColor=function(){var a=this.random(1,256).toFixed(),b=this.random(1,256).toFixed(),c=this.random(1,256).toFixed();return"rgb("+a+","+b+","+c+")"},this.idMode=function(a,b){for(var c,d={},e=0;c=a[e];e++)c[b]&&(d[c[b]]=c,d[c[b]].active="");return d},this.getXHR=function(){var a=new XMLHttpRequest;return a},this.getJSON=function(a,b){var c=this.getXHR();a.url=a.url||location.href,a.data=a.data||null,b=b||function(){},a.type=a.type||"json";var d=a.url;if("jsonp"==a.type){window.jsonCallback=b;var e=d.replace("callback=?","callback=jsonCallback"),f=document.createElement("script");f.src=e,document.body.appendChild(f)}c.open("GET",a.url,!0),c.send(a.data),c.onreadystatechange=function(){200==c.status&&4==c.readyState&&b(c.responseText)}},this.exec=function(){var a=this.argToArray(arguments),b=a.shift(),c=a.shift(),d=a.shift();return this.not(this.is["function"],b)&&this.warn(b+"is not function"),b.apply(c||null,d)},this.objectKeys=function(){var a=this.argToArray(arguments),b=a[0],c=[];return this.each(b,function(a,b){c.push(b)}),c},this.valueOfAll=function(a,b){var c=[];return this.each(a,function(a){a[b]&&c.push(a[b])}),c},this.objToTwoDimArray=function(){var a=this.argToArray(arguments),b=a[0],c=[];return this.each(b,function(a,b){var d=[];d[0]=[a],d[1]=[b],c.push(d)}),c},this.arrToObj=function(){var a=this.argToArray(arguments),b=a.shift(),c=a.shift(),d=a.shift(),e={};return this.each(b,function(a){var b=a[c];d&&delete a[c],e[b]=a}),e},this.contain=function(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return!0;return!1},this.subSet=function(a,b){},this.remove=function(a,b,c){return this.is.array(a)&&a.length>b?a.splice(b,c?c:1):null},this.categorize=function(a,b){var c={};return this.each(a,function(a){var d=a[b].toString();c[d]=c[d]||[],c[d].push(a)}),c},this.sortBy=function(a,b,c){var d=this;return this.is["function"](b)?a.sort(b):"string"==b?a.sort(function(a,b){var e=d.getValue(a,c).toUpperCase(),f=d.getValue(b,c).toUpperCase();return f>e?-1:e>f?1:0}):"number"==b?a.sort(function(a,b){return d.getValue(a,c)>d.getValue(b,c)?1:-1}):void 0},this.sortBy2=function(a,b,c){},this.groupBy=function(a,b,c){c=c||this["return"];var d={};return this.each(a,function(a){var e=a.data[b];d[e]=d[e]||[],d[e].push(c(a))}),d},this.groupIf=function(a,b,c){c=c||this["return"];var d={};return this.each(a,function(a){var e=b(a);d[e]=d[e]||[],d[e].push(c(a))}),d},this.groupByFlatMode=function(){var a=this,b=this.argToArray(arguments),c=b.shift(),d=b.shift(),e={};return this.each(c,function(b){var c="";a.each(d,function(a){c+="_"+b[a]}),e[c]=e[c]||[],e[c].push(b)}),e},this.groupByTreeMode=function(){var a=this,b=this.argToArray(arguments),c=b.shift(),d=b.shift(),e=d.shift(),f=b.shift(),g=a.groupBy(c,e,f);return this.each(g,function(b,c){d.length>0&&(g[c]=a.groupByTreeMode.call(a,b,_.cloneArray(d),f))}),c=g},this.indexBy=function(){},this.countBy=function(){},this.flatTreeBy=function(a,b,d,e,f,g,h){e=e||[],h=h||0,_.each(_.cloneObj(a),function(a){a.parentIdn=f||g||"root",a.depth=h,e.push(a),a[b]&&a[b].length>0&&c.flatTreeBy(a[b],b,d,e,a[d],g,h+1),delete a[b]})},this.verify=function(b,c){this.not(this.is.object,b)&&this.fail("is Not Object"),this.not(this.is.object,c)&&this.fail("is Not Object"),this.haveKey(c,"key")&&this.haveKey(c,"condition")&&this.haveKey(c,"value")||this.fail("dont have correct comparator attrs");var d=b[c.key];return d!==a&&_.compare(d,c.condition,c.value)},this.replaceInArray=function(a,b,c){Array.prototype.splice.apply(a,[b,c.length+b].concat(c))},this.safeAssignArray=function(a,b){this.replaceInArray(a,0,b)},this.safeClear=function(a){if(this.is.array(a))Array.prototype.splice.apply(a,[0,a.length].concat([]));else for(var b in a)a.hasOwnProperty(b)&&delete a[b]},this.getCumulativeOffset=function(a){var b,c;if(b=c=0,a.offsetParent)do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent);return{x:b,y:c}},this.recursive=function(){},this.fn=function(){return function(){}},this.constValue=function(a){var b=a;return function(){return b}},this.i=function(a){return a},this.propByPrefix=function(a,b,c){c=_.assignIfNotDefined(c,!1);var d={};for(var e in a)if(0===e.search(b)){var f=c?this.camelCase(e.substr(b.length)):e;d[f]=a[e]}return d},this.camelCase=function(a){return a.toLowerCase().replace(/-(.)/g,function(a,b){return b.toUpperCase()})},this.pascalCase=function(a){return a[0].toUpperCase()+a.substr(1,a.lenght)},this.regularCase=function(a){return a.replace(/([A-Z])/g," $1").replace(/^./,function(a){return a.toUpperCase()})},this.extractWrapedBy=function(a,b){var c=null;if("{}"==b)c=/\{(.*?)\}/g;else if("()"==b)c=/\((.*?)\)/g;else{if("[]"!=b)return;c=/\[(.*?)\]/g}for(var d=new RegExp(c),e=a.match(d),f=0;e&&f<e.length;f++)e[f]=e[f].substring(1,e[f].length-1);return e},this.spliteAndTrim=function(a){return a.split(/[\s,]+/)},this.chain=function(a,b,d){return function(){var e=c.argToArray(arguments),f=c.exec(a,d||null,e),g=f?f.promise||f.$promise:null;return g?void g.then(function(){return c.exec(b,d||null,[f])}):f&&f.then?(f.then(function(){var a=c.argToArray(arguments);c.exec(b,d||null,a)}),f):c.exec(b,d||null,[f])}},this.removeEventArg=function(a){this.each(a,function(b,c){b.currentScope&&b.targetScope&&this.remove(a,c)},this)},this.dataset=function(a,b){var c=function(){};return c.add=function(){},c.get=function(a,b){return a.dataset[b]},c}(this),this.attr=function(a,b){var c=function(){};return c}(this),this.addClass=function(a,b){this.warn("change refrence");for(var c=this.select(a),d=0;d<c.length;d++)c[d].classList?DOMTokenList.prototype.add.apply(c[d].classList,_.spliteAndTrim(b)):-1===c[d].className.indexOf(b)&&(c[d].className=c[d].className+" "+b)},this.removeClass=function(a,b){this.warn("change refrence");for(var c=this.select(a),d=0;d<c.length;d++)if(c[d].classList)DOMTokenList.prototype.remove.apply(c[d].classList,_.spliteAndTrim(b));else{var e=new RegExp(b,"g");c[d].className=c[d].className.replace(e,"").trim()}},this.changeClass=function(a,b,c){this.warn("change refrence");var d=this.select(a);_.removeClass(d,b),_.addClass(d,c)},this.availableDim=function(){var a=document.createElement("div");a.style.position="fixed",a.style.top="0px",a.style.right="0px",a.style.bottom="0px",a.style.left="0px",document.body.appendChild(a);var b=a.offsetHeight,c=a.offsetWidth;return a.parentNode.removeChild(a),{height:b,width:c}},this.cancelBubble=function(a){var b=a?a:window.event;b.stopPropagation&&b.stopPropagation(),null!==b.cancelBubble&&(b.cancelBubble=!0)},this.config=function(a,b){for(var c in a)this[c]=b&&b[c]||a[c]},this.ready=function(){var a=[];return function(b){return a.push(b),"interactive"==document.readyState?void b():void document.addEventListener("DOMContentLoaded",b,!0)}}(),this.loadJS=function(a){var b={};return function(a,c){if(b[a])b[a].state?setTimeout(function(){c(a)},1):b[a].callbacks.push(c);else{b[a]={state:!1,callbacks:[]},b[a].callbacks.push(c);var d=document.createElement("script");d.setAttribute("type","text/javascript"),d.onload=function(c,d,e){b[a].state=!0;for(var f,g=0;f=b[a].callbacks[g];g++)f(a)},d.setAttribute("src","/"+a),document.getElementsByTagName("head")[0].appendChild(d)}}}(this),this.loadCSS=function(a){var b={};return function(a,c){if(!b[a]){var d=document.createElement("link");d.setAttribute("rel","stylesheet"),d.setAttribute("href","/"+a),document.getElementsByTagName("head")[0].appendChild(d)}}}(this),this.data=function(a){}(this),this.scope=function(){var a=function(){this.fn={},this.data={},this.config={},this.option={},this.event={},this.module={},this["const"]={}};return new a},this.eventBus={topics:{},sub:function(a,b){this.topics[a]||(this.topics[a]=[]),this.topics[a].push(b)},unsub:function(){},pub:function(a,b){!this.topics[a]||this.topics[a].length<1||this.topics[a].forEach(function(a){a(b||{})})}},this._Observable={observers:[],lastId:-1,addObserver:function(a){return this.observers.push({callback:a,id:++this.lastId}),this.lastId},removeObserver:function(a){for(var b=this.observers.length-1;b>=0;b--)if(this.observers[b],this.observers[b].id==a)return this.observers.splice(b,1),!0;return!1},notifyObservers:function(a){for(var b=this.observers.length-1;b>=0;b--)this.observers[b].callback(a)}},this.Observable=function(a,b){function c(a){this.subsciber=[]}return c.prototype.observe=function(a){this.subsciber.push(a)},c.prototype.unobserve=function(a){for(var b=0,c=this.subsciber.length;c>b;b++)if(this.subsciber[b]===a)return this.subsciber.splice(b,1),!0;return!1},c.prototype.notify=function(){for(var a=Array.prototype.slice.call(arguments,0),b=0,c=this.subsciber.length;c>b;b++)this.subsciber[b].update.apply(null,a)},c.set=function(a){},c}(this),this.decorator=function(){},this.impelemetIn=function(a){},this.freezable=function(a,b){var c={};return c.freeze=function(a){},c.unfreeze=function(a){},function(a){}}(this),this.get=function(){var a=function(){};return a.constructor=function(a){return a.constructor},a}(),this.prototype=function(a,b){var c=function(){};return c.extend=function(b,c){a["if"].is.not["function"](b,function(){return a.get.constructor(b)});for(var d in c)c.hasOwnProperty(d)&&(b.prototype[d]=c[d])},c}(this),this.on=function(a,b,c){},this.event=function(a,b,c){var d=this.select(a);this.each(d,function(a){a.addEventListener(b,c)})},this.fixEvent=function(a){window.event=window.event||a},this.bind=function(a,b,c){c=c||this.i},this.activated=function(a,b,c,d){c=c||"active";var e=_.select(a);_.each(e,function(a){var e=_.select(b,a);_.each(e,function(a){_.event(a,"click",function(){_.removeClass(e,c),_.addClass(a,c),d&&d(this)})})})},this.regex=function(a){var b={number:/\d+/g},c=a.fn;return c.match=function(a){return a.match(b.number)},c.matchFirst=function(a){return a.match(b.number)[0]},c.type=b,c}(this),this.shift=function(a,b){var d,e=0;if("number"==typeof b)e=b;else if(c.is["function"](b))for(var f=0;b(a[f++]);)e++;else e++;return d=a.slice(0,e),c.is.array(d)&&1===d.length?d[0]:d};var d={},e={};this.onScrollDown=function(a,b){e[a]=e[a]||[],e[a].push(b)},this.onScrollTop=function(a,b){d[a]=d[a]||[],d[a].push(b)},this.onscroll=function(a){var b=[];return window.onscroll=function(){c.each(b,function(a){a()})},function(a){b.push(a)}}(window.onscroll),this.preventEvent=function(a){var b=a||window.event;b.preventDefault(),b.stopPropagation()},this.object=function(a){var b=_.fn();return _.extend(new b,a)},this.strStartsWith=function(a,b){return 0===a.indexOf(b)},this.onscroll(function(){var a=window.scrollY;c.each(d,function(b,e){a>e&&c.each(d[e],function(a){a()})}),c.each(e,function(b,d){d>a&&c.each(e[d],function(a){a()})})})};return{installHelperOn:function(a){c.call(a)},get:function(){return new c}}}();"undefined"!=typeof exports&&"undefined"!=typeof module&&module.exports?exports=module.exports=c.get():this._=c.get()}).call(this);
//# sourceMappingURL=sutility-0.0.1.min.js.map