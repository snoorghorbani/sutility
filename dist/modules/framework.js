/*! sutility - v0.0.77 - 2015-09-13 */
this.framework=function(a){return function(b){b=b||{},b.version=b.version||1,b.run_env||a.fail("you must define application run_env function in app.js"),window.RUN_ENV=b.run_env();var c=function(){},d={},e={},f={},g={};c.factory=function(b){return function(b,c){var e=a.camelCase(b);window[e+"s"]&&a.fail(e+"s exists"),window[e+"s"]={};var f=c();return d[e]=function(a,b,c){return window[e+"s"][a]=new f(a,b,c)},f}}(this),c.controller=function(b,c){var d={};return function(b,c){return e[b]={},e[b].fn=c,d[b]=e[b].scope=a.scope(),a.ready(function(){var c=a.selectFirst('[data-controller="'+b+'"]');c&&h(e[b],c)}),e[b].scope}}(this),c.loadJS=function(c){var d=[],e={};return function(c){var g=a.fn(),h=[];if("development"==RUN_ENV){for(var i=0;i<c.length;i++)a.is.array(f[c[i]])?a.each(f[c[i]],function(a){f[a]||(f[a]=a),e[f[a]]||(h.push(f[a]),e[f[a]]=!1)}):e[f[c[i]]]||(h.push(f[c[i]]),e[f[c[i]]]=!1);for(var i=0;i<h.length;i++)h[i]+="?version="+b.version;for(var j,i=0;j=h[i];i++){var k=j;a.loadJS(k,function(b){e[b]=!0;for(var c=d.length-1;c>=0;c--)d[c].done||(d[c].depen=a.array.remove(d[c].depen,b),0===d[c].depen.length&&(d[c].done=!0,d[c].thenFn()))})}}return{then:function(a){g=a,0==h.length?g():d.push({depen:h,thenFn:a})}}}}(this),c.loadCSS=function(b){return function(b){for(var c=[],d=0;d<b.length;d++)a.is.array(g[b[d]])?a.each(g[b[d]],function(a){g[a]||(g[a]=a),c.push(g[a])}):c.push(g[b[d]]);for(var d=0;d<c.length;d++)that.loadCSS(c[d]);return this}}(this),c.config=function(a){return function(a){that.extend(f,a.js),that.extend(g,a.css)}}(this);var h=function(b,c){b.fn.apply(b.scope,[b.scope,c]);for(var e in d){var f=a.dashCase(e),g=c.querySelectorAll("["+f+"]");a.each(g,function(a){var c=a.getAttribute(f),g=b.scope.config[c]||{};d[e](c,a,g)})}};return c}}(this);
//# sourceMappingURL=framework.js.map