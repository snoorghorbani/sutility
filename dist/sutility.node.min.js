/**
 * sutility v0.0.988 - 2016-08-06
 * Functional Library
 *
 * Copyright (c) 2016 soushians noorghorbani <snoorghorbani@gmail.com>
 * Licensed MIT
 */

(function(a){"use strict";var b=null,c=!0,d=d||{};d.SUTILITY=function(){var e=function(){var b=this,e=this;this.argToArray=function(a){if(b.is.not.ie())return Array.prototype.slice.call(a);for(var c=[],d=0;d<a.length;d++)c.push(a[d]);return c},this.array=function(a){var b=function(){};b.compact=function(b){return a.filter(b,a.i)},b.union=function(b){var c={},d=[];return a.each(b,function(a){c[a]=""}),a.each(c,function(a,b){d.push(b)}),d},b.uniq=function(a){};var d=function(b,c,e){for(var f=-1,g=b.length,h=-1,i=[];++f<g;){var j=b[f];if(a.is.array(j)&&(e||a.is.array(j)||a.is.arguments(j))){c&&(j=d(j,c,e));for(var k=-1,l=j.length;++k<l;)i[++h]=j[k]}else e||(i[++h]=j)}return i};return b.flattenDeep=function(a){var b=a?a.length:0;return b?d(a,!0):[]},b.remove=function(b,c){return a.filter(b,function(a){return c!==a})},b.shift=function(a,b){var c,d=0;if("number"==typeof b)d=b;else if(e.is["function"](b))for(var f=0;b(a[f++]);)d++;else d++;return c=a.slice(0,d),e.is.array(c)&&1===c.length?c[0]:c},b.reverse=function(b){c&&a.is.not.array(b)&&a.fail("is Not Array");for(var d=[],e=b.length-1,f=0;e>=0;e--,f++)d[f]=b[e];return d},b.concat=function(b,d){return c&&(a.is.not.array(b)&&a.fail("is Not Array"),a.is.not.array(d)&&a.fail("is Not Array")),b.concat(d)},b.indexOf=function(b,c,d){var e;return a.is["function"](c)?a.each(b,function(a,b){c.call(d,a)&&(e=b)}):e=b.indexOf(c),e},b.sort=function(b,c){return b.sort(function(b,d){return a.getValue(b,c)>a.getValue(d,c)?1:a.getValue(b,c)<a.getValue(d,c)?-1:0}),b},b}(this),this.arrToObj=function(){var a=b.argToArray(arguments),c=a.shift(),d=a.shift(),e=a.shift(),f={};return b.each(c,function(a){var b=a[d];e&&delete a[d],f[b]=a}),f},this.assign=function(b){var c=function(){};c.ifDefined=function(b,c){return c!==a?e.safeAssign(b,c):b},c.ifNotDefined=function(b,c){return b===a?c:b}}(this),this.assignIfDefined=function(b,c){return c!==a?e.safeAssign(b,c):b},this.assignIfNotDefined=function(b,c){return b===a?c:b},this.attr=function(a,b){var c=function(){};return c}(this),this.bind=function(a,b,c){c=c||this.i},this.callBox=function(a){return function(a,b,c){var d=null;return function(){if(!d||Date.now()-d>b)return d=Date.now(),a.apply(c,arguments)}}}(this),this.callConstantly=function(a){return function(a,b,c){return function(){--b;var d;return a&&(d=a.apply(c||{},arguments)),0==b&&(a=null),d}}}(this),this.callIgnore=function(a){return function(a,b,c,d){var e=b;return function(){if(0==b--)return b=d?e:b,a.apply(c,arguments)}}}(this),this.callVoucher=function(b){return function(b,c,d){return setTimeout(function(){b=null},c),function(){return b?b.apply(d||{},arguments):a}}}(this),this.callWhen=function(a,c,d,e){var f=b.is["function"](a)?"fn":"string",g=setInterval(function(){("string"!=f||b.getValue(a))&&("fn"!=f||a())&&(!d&&clearInterval(g),c())},e||20)},this.callWithDelay=function(a,b){return function(c,d,e){var f,g,h=Date.now();return function(){g=arguments,h=Date.now(),f=f?f:setInterval(function(){if(!(Date.now()-h<d))return clearInterval(f),f=b,c.apply(e||a,g||[])},d)}}}(this),this.camelCase=function(a){return a.replace(/[\W|\_](.)/g,function(a,b){return b&&b.toUpperCase()})},this.cancelBubble=function(a){var b=a?a:d.event;b.stopPropagation&&b.stopPropagation(),null!==b.cancelBubble&&(b.cancelBubble=!0)},this.canvas=function(a){var b=function(){};return b.arc=function(a,b,c,d,e,f,g){a.beginPath(),a.arc(b,c,d,e,f,g),a.closePath(),a.fill(),a.stroke()},b.rect=function(a,b,c,d,e,f,g){a.beginPath(),a.rect(b,c,d,e),a.closePath(),f!==!1&&a.fill(),g!==!1&&a.stroke()},b.text=function(a,b,c,d){a.beginPath(),a.fillText(b,c,d),a.fill(),a.closePath()},b.line=function(a,b,c){a.beginPath(),a.moveTo(b.x,b.y),a.lineTo(c.x,c.y),a.closePath(),a.stroke()},b}(this),this.catchall=function(b){var c=null,e={},f={},g={urlPrefix:"/filter",routePrefix:"/filter/filterresult"},h={fixedName:null,multi:!1,"default":null},i=function(a){return this.config=b.update(b.cloneObj(g),a),this};return i.prototype.key=function(c,g){e[c]=b.update(b.cloneObj(h),g),e[c]["default"]=g["default"]?b.is.array(g["default"])?g["default"]:[g["default"]]:[],f[c]=f[c]||[],b.each(e[c]["default"],function(d){var g=b.is.array(d)?d[0]:d,h=b.is.array(d)?d[1]:a,i=c+"-"+g.toString()+(h?"-"+h.toString():"");e[c].multi?f[c].push(i):f[c]=[i]});var j=decodeURIComponent(d.location.pathname),k=j.replace(this.config.urlPrefix,"");if(k=k.split("/"),b.each(k,function(a){b.is.startWith(a,c+"-")&&(f[c]=b.assignIfNotDefined(f[c],[]),a.length>c.length+1&&f[c].push(a))}),i.prototype.add=b.assignIfNotDefined(i.prototype.add,{}),i.prototype.add[c]=function(a,b){var d=c+"-"+a.toString()+(b?"-"+b.toString():"");e[c].multi?(f[c]=f[c]||[],f[c].push(d)):f[c]=[d]},i.prototype.remove=b.assignIfNotDefined(i.prototype.remove,{}),i.prototype.remove[c]=function(a,d){var g=c+"-"+a.toString()+(d?"-"+d.toString():"");f[c]=b.filter(f[c],function(a){return a.toLowerCase()!==g.toLowerCase()});var h=e[c].fixedName;h&&(g=h+"-"+a.toString()+(d?"-"+d.toString():""),f[h]=b.filter(f[h],function(a){return a.toLowerCase()!==g.toLowerCase()}))},i.prototype.reset=b.assignIfNotDefined(i.prototype.reset,{}),i.prototype.reset[c]=function(){f[c]=[],b.each(e[c]["default"],function(d){var g=b.is.array(d)?d[0]:d,h=b.is.array(d)?d[1]:a,i=c+"-"+g.toString()+(h?"-"+h.toString():"");e[c].multi?f[c].push(i):f[c]=[i]})},i.prototype.get=b.assignIfNotDefined(i.prototype.get,{}),i.prototype.get[c]=function(){var a;return a=f[c]},g.fixedName){var l=b.clone(g);delete l.fixedName,this.key(g.fixedName,l)}},i.prototype.getRoute=function(){var a=d.location.origin+this.config.routePrefix||"fortest"+this.config.routePrefix;return b.each(f,function(c,d){b.each(c,function(c){var d=b.fine(c.split("-"),function(a){return b.is.value(a)});d&&(a+="/"+c)})}),decodeURIComponent(a.toLowerCase())},i.prototype.getUrl=function(a){var c=d.location.origin+this.config.urlPrefix||"fortest"+this.config.urlPrefix;return b.each(f,function(a,d){b.each(a,function(a){var d=b.fine(a.split("-"),function(a){return b.is.value(a)});d&&(c+="/"+a)})}),decodeURIComponent(c.toLowerCase())},i.prototype.url=function(a){var c=d.location.origin+a||"fortest"+a;return b.each(f,function(a,d){b.each(a,function(a){var d=b.fine(a.split("-"),function(a){return b.is.value(a)});d&&(c+="/"+a)})}),decodeURIComponent(c.toLowerCase())},function(a){return c?c:c=new i(a)}}(this),this.categorize=function(a,c){var d={};return b.each(a,function(a){var b=a[c].toString();d[b]=d[b]||[],d[b].push(a)}),d},this.chain=function(a,b,c){return function(){var d=e.argToArray(arguments),f=e.exec(a,c||null,d),g=f?f.promise||f.$promise:null;return g?void g.then(function(){return e.exec(b,c||null,[f])}):f&&f.then?(f.then(function(){var a=e.argToArray(arguments);e.exec(b,c||null,a)}),f):e.exec(b,c||null,[f])}},this.clone=function(a){return a.concat?a.concat():b.cloneObj(a)},this.cloneArray=function(a){return a.concat()},this.cloneObj=function(a,c){c=b.assignIfNotDefined(c,!0);var d=b.object();for(var e in a)(c||a.hasOwnProperty(e))&&(b.is.scalar(a[e])?d[e]=a[e]:d[e]=b.clone(a[e]));return d},this.compare=function(a,b,c){switch(b){case"eq":return a==c;case"neq":return a!=c;case"grt":return a>c;case"lst":return a<c;case"ct":return a.toString().indexOf(c.toString())>-1}},this.compare.conditions={equal:"eq",neq:"neq",grt:"grt",lst:"lst",ct:"ct"},this.compileString=function(a,b,c){var d=/\{\{/,e=[],f=a.search(d);if(f>-1){e[e.length]=a.substring(0,f),a=a.substring(f);var g=a.search(/\}\}/),h=a.substring(2,g),i=b[h.trim()];this.is.object(i)&&(i=c.call(null,i)),e[e.length]=i,a=a.substring(g+2),e=e.concat(this.compileString(a,b,c))}else e[e.length]=a;return e.join("")},this.complement=function(a){return function(){return!a.apply(null,this.argToArray(arguments))}},this.config=function(a,b){for(var c in a)this[c]=b&&b[c]||a[c]},this.constValue=function(a){var b=a;return function(){return b}},this.contain=function(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return!0;return!1},this.countBy=function(){},this.dashCase=function(a){return a.replace(/([A-Z])|([\W|\_])/g,function(a,b,c,d,e){return/[\w]/.test(a)?/[\w]/.test(a&&0==d)?a.toLowerCase():/[\w]/.test(a)?"-"+a.toLowerCase():"-":"-"})},this.data=function(a){}(this),this.dataset=function(a,b){var c=function(){};return c.add=function(){},c.get=function(b,c){return b.dataset?b.dataset[c]:b.getAttribute("data-"+a.dashCase(c))},c}(this),this.date=function(){var a=1948320.5,c=1721425.5,d={};d.persian={},d.persian.to={},d.georgian={},d.georgian.to={},d.julian={},d.julian.to={};var e=function(a){return a=a.toString(),1==a.length?"0"+a:a};return d.persian.to.julian=function(c,d,e){var f,g;return c=parseInt(c),d=parseInt(d),e=parseInt(e),f=c-(c>=0?474:473),g=474+b.math.mod(f,2820),e+(d<=7?31*(d-1):30*(d-1)+6)+Math.floor((682*g-110)/2816)+365*(g-1)+1029983*Math.floor(f/2820)+(a-1)},d.persian.to.georgian=function(a,b,c,e){var f=d.julian.to.georgian(d.persian.to.julian(parseInt(a),parseInt(b),parseInt(c)));return e?f.join(e):f},d.georgian.to.julian=function(a,d,e){return a=parseInt(a),d=parseInt(d),e=parseInt(e),c-1+365*(a-1)+Math.floor((a-1)/4)+-Math.floor((a-1)/100)+Math.floor((a-1)/400)+Math.floor((367*d-362)/12+(d<=2?0:b.is.georgianLeapYear(a)?-1:-2)+e)},d.georgian.to.persian=function(a,b,c,e){var f=d.julian.to.persian(d.georgian.to.julian(parseInt(a),parseInt(b),parseInt(c)));return e?f.join(e):f},d.julian.to.georgian=function(a){var d,f,g,h,i,j,k,l,m,n,o,p,q,r;return a=parseFloat(a),d=Math.floor(a-.5)+.5,f=d-c,g=Math.floor(f/146097),h=b.math.mod(f,146097),i=Math.floor(h/36524),j=b.math.mod(h,36524),k=Math.floor(j/1461),l=b.math.mod(j,1461),m=Math.floor(l/365),n=400*g+100*i+4*k+m,4!=i&&4!=m&&n++,q=d-b.date.georgian.to.julian(n,1,1),r=d<b.date.georgian.to.julian(n,3,1)?0:b.is.georgianLeapYear(n)?1:2,o=Math.floor((12*(q+r)+373)/367),p=d-b.date.georgian.to.julian(n,o,1)+1,new Array(e(n),e(o),e(p))},d.julian.to.persian=function(a){var c,d,f,g,h,i,j,k,l,m;return a=parseFloat(a),a=Math.floor(a)+.5,g=a-b.date.persian.to.julian(475,1,1),h=Math.floor(g/1029983),i=b.math.mod(g,1029983),1029982==i?j=2820:(k=Math.floor(i/366),l=b.math.mod(i,366),j=Math.floor((2134*k+2816*l+2815)/1028522)+k+1),c=j+2820*h+474,c<=0&&c--,m=a-b.date.persian.to.julian(c,1,1)+1,d=m<=186?Math.ceil(m/31):Math.ceil((m-6)/30),f=a-b.date.persian.to.julian(c,d,1)+1,new Array(e(c),e(d),e(f))},d}(),this.decorator=function(){},this.deformPathValue=function(c,d,e,f){if(!c)return a;if(null!=c[e])return c[e]=d(c[e]);var e=e.split("."),g=e.shift(),h=c[g];if(f&&0==e.length)return c[g]=d(c);for(;g=e.shift();){if(h[g]&&b.is.array(h[g]))return b.map(h[g],function(a){return b.deformPathValue(a,d,e.join("."),f)});if(h[g])h[g]=d(h[g]);else if(f&&0==e.length)return h[g]=d(h)}},this.dictionary=function(a,c){var d={},e=function(a){d=a||{},b.extend(this,d)};return e.prototype["default"]=function(b){a.extend(d,b)},e.prototype.reset=function(a){this[a]=d[a]},e.prototype.add=function(a,b){this[a]=b},e.prototype.remove=function(a){},e.prototype.data=function(){return b.cloneObj(this,!1)},{"new":function(a){return new e(a)},listen:function(a){}}}(this),this.each=function(a,b,c,d){if(d=this.assignIfNotDefined(d,!1),!a)return!1;this.is.nodeList(a)&&this.each(this.argToArray(a),b,c);var e;if(this.is.array(a)||this.is["function"](a))for(e in a)(a.hasOwnProperty&&a.hasOwnProperty(e)||d)&&b.call(c,a[e],e);if(this.is.object(a))for(e in a)(a.hasOwnProperty&&a.hasOwnProperty(e)||d)&&b.call(c,a[e],e)},this.enableBackup=function(a,b){var c={};return c.__repository={},c.backup=function(b){return b=a.assignIfNotDefined(b,"last"),this.__repository[b]=JSON.stringify(this),this.__repository[b]},c.restore=function(b){if(b=a.assignIfNotDefined(b,"last"),!a.is.not.defined(this.__repository[b])){var c=JSON.parse(this.__repository[b]);return a.update(this,c)}},function(b){var d=a["if"].is.not["function"](b,function(){return a.get.constructor(b)});return a.prototype.extend(d,c),d}}(this),this.eventBus={topics:{},sub:function(a,b){this.topics[a]||(this.topics[a]=[]),this.topics[a].push(b)},unsub:function(){},pub:function(a,b){!this.topics[a]||this.topics[a].length<1||this.topics[a].forEach(function(a){a(b||{})})}},this.exec=function(){var a=this.argToArray(arguments),d=a.shift(),e=a.shift(),f=a.shift();return c&&b.is.not["function"](d)&&b.warn(d+"is not function"),d.apply(e||null,f)},this.extend=function(a,d,e){return c&&b.is.not.defined(a)&&b.fail("destination object cant be null"),b.is.array(a)?b.safeAssignArray(a,d):b.is.object(a)?(b.safeClear(a),b.each(d,function(b,c){a[c]=b},this,e)):a=d,a},this.extendFunc=function(a,b){var c=arguments[2];return function(){a.call(this),b.call(this,c)}},this.extractWrapedBy=function(a,b){var c=null;if("{}"==b)c=/\{(.*?)\}/g;else if("()"==b)c=/\((.*?)\)/g;else{if("[]"!=b)return;c=/\[(.*?)\]/g}for(var d=new RegExp(c),e=a.match(d),f=0;e&&f<e.length;f++)e[f]=e[f].substring(1,e[f].length-1);return e},this.fail=function(a){throw new Error(a)},this.filter=function(a,d){c&&b.is.not.object(d)&&b.is.not["function"](d);var e=[],f=b.is["function"](d)?d:b.rightCurry(b.is.closet)(d);return b.each(a,function(a){f(a)&&e.push(a)}),e},this.fine=function(a,c){var d=!0;return b.each(a,function(a){c(a)||(d=!1)}),d},this.fixEvent=function(a){d.event=d.event||a},this.flatTreeBy=function(a,c,d,f,g,h,i){f=f||[],i=i||0,b.each(b.cloneObj(a),function(a){a.parentIdn=g||h||"root",a.depth=i,f.push(a),a[c]&&a[c].length>0&&e.flatTreeBy(a[c],c,d,f,a[d],h,i+1),delete a[c]})},this.flyWeight=function(a,b){}(this),this.fn=function(){return function(){}},this.freezable=function(a,b){var c={};return c.freeze=function(a){},c.unfreeze=function(a){},function(a){}}(this),this.get=function(){var a=function(){};return a.constructor=function(a){return a.constructor},a}(),this.getCumulativeOffset=function(a){var b,c;if(b=c=0,a.offsetParent)do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent);return{x:b,y:c}},this.getValue=function(e,f){if(c&&(e||this.warn("UTILITY getValue function first parameter not defined"),!e))return a;1==arguments.length&&(f=e,e=d);var g;if(b.is.array(e))return e[f];g=e;for(var h,i=f.split("."),j=0;h=i[j];j++){if(!g[h])return void b.warn(["dont have ",h,"property"].join(" "));if(b.is.array(g[h])){for(var k,l=[],m=i.splice(j+1),n=0;k=g[h][n];n++)l[n]=b.getValue(k,m.join("."));return l}g=g[h]}return g},this.groupBy=function(a,c,d){d=d||b.i;var e={};return b.each(a,function(a){var b=a[c];e[b]=e[b]||[],e[b].push(d(a))}),e},this.groupByFlatMode=function(){var a=this,c=b.argToArray(arguments),d=c.shift(),e=c.shift(),f={};return this.each(d,function(b){var c="";a.each(e,function(a){c+="_"+b[a]}),f[c]=f[c]||[],f[c].push(b)}),f},this.groupByTreeMode=function(){var a=this,c=b.argToArray(arguments),d=c.shift(),e=c.shift(),f=e.shift(),g=c.shift(),h=a.groupBy(d,f,g);return b.each(h,function(c,d){e.length>0&&(h[d]=a.groupByTreeMode.call(a,c,b.cloneArray(e),g))}),d=h},this.groupIf=function(a,c,d){d=d||b.i;var e={};return b.each(a,function(a){var b=c(a);e[b]=e[b]||[],e[b].push(d(a))}),e},this.haveKey=function(a,d){c&&b.is.not.object(a)&&this.warn("is Not Object");for(var e,f=a,g=d.split("."),h=0;e=g[h];h++){if(!f[e]&&0!==f[e])return b.warn(["dont have ",e,"property"].join(" ")),!1;b.is.not.array(f[e])&&(f=f[e])}return!0},this.i=function(a){return a},this.idMode=function(a,b){for(var c,d={},e=0;c=a[e];e++)c[b]&&(d[c[b]]=c,d[c[b]].active="");return d},this.impelemetIn=function(a){},this.indexBy=function(){},this["interface"]=function(a,b){},this.is=function(a,b){var f=function(a,b){if(a.matches)return a.matches(b);var c=this.argToArray(a.parentNode.querySelectorAll(b));return c.indexOf(a)>-1};f.object=function(a){return"[object Object]"===Object.prototype.toString.call(a)},f.nodeList=function(c){return a.is.not.ie()?"[object NodeList]"===Object.prototype.toString.call(c):!(c.length===b||c.push!==b||c.length>0&&c[0].tagName===b)},f.element=function(a){return Object.prototype.toString.call(a).search("Element")>-1},f.HTMLCollection=function(a){return"[object HTMLCollection]"===Object.prototype.toString.call(a)},f.array=function(a){return"[object Array]"===Object.prototype.toString.call(a)},f.number=function(a){return"[object Number]"===Object.prototype.toString.call(a)},f["function"]=function(a){return"[object Function]"===Object.prototype.toString.call(a)},f.string=function(a){return"[object String]"===Object.prototype.toString.call(a)},f.undefined=function(a){return"[object Undefined]"===Object.prototype.toString.call(a)},f.event=function(a){return Object.prototype.toString.call(a).toLowerCase().search("event")>-1},f.defined=function(a){return a!==b&&null!==a&&""!==a},f.json=function(){},f.error=function(){},f.startWith=function(a,b){return 0===a.indexOf(b)},f.endWith=function(a){},f.value=function(a){return!!a},f.empty=function(b){if(a.is.object(0))for(var c in b)if(b.hasOwnProperty(c))return!1;return!a.is.array(b)||0===b.length},f.truthy=function(){},f.scalar=function(a){return f.defined(a)&&f.not.array(a)&&f.not.object(a)&&f.not["function"](a)},f.prototypeProp=function(a,b){return a[b]&&!a.hasOwnProperty(b)},f.equal=function(a,b){return JSON.stringify(a)==JSON.stringify(b)},f.equalText=function(b,d){return c&&(a.is.not.string(b)&&e.warn("equal function :"+b+" is Not String"),a.is.not.string(d)&&e.warn("equal function :"+d+" is Not String")),b.toLowerCase(b)===d.toLowerCase(d)},f.closet=function(b,c){return a.is.equal(a.partial(b,a.report.skeleton(c)),c)},f.contain=function(b,c){var d=a.is.regex(c)?c:new RegExp(c,"g");return b.match(d)&&b.match(d).length>0},f.regex=function(a){return"RegExp"===a.constructor.name},f.ie=function(a){if(!d||!d.navigator)return!1;var b=new RegExp("(MSIE)Wd","g");b=new RegExp("MSIE 8.0|MSIE 7.0","g");var c=d.navigator.userAgent.match(b);if(!c)return!1;c=c[c.lenght];var e=d.navigator.userAgent.indexOf("Trident")>0;return e},f.same=function(a,b){return a.isEqualNode?a.isEqualNode(b):a===b},f.persianLeapYear=function(a){return 682*((a-(a>0?474:473))%2820+474+38)%2816<682},f.georgianLeapYear=function(a){return a%4==0&&!(a%100==0&&a%400!=0)};var g,h={};for(g in f)(function(a){f.hasOwnProperty(a)&&(h[a]=function(b,c,d){return!f[a](b,c,d)})})(g);f.not=h;var i={};for(g in f)(function(a){f.hasOwnProperty(a)&&(i[a]=function(a){})})(g);f.all=i;var j={};for(var k in f)(function(a){f.hasOwnProperty(a)&&(j[a]=function(a){})})(k);return f.any=j,f}(this),this.iterator=function(a){return function(a){var b=-1;return{next:function(){return b<a.length?{value:a[++b],done:!1}:{done:!0}},prev:function(){return b>-1?{value:a[--b],done:!1}:{done:!0}},current:function(){return{value:a[b],done:!1}},index:function(){return b}}}}(this),this.keys=function(){var a=b.argToArray(arguments),c=a[0],d=[];return b.each(c,function(a,b){d.push(b)}),d},this.leftCurry=function(a,c){return c=c||e,function(){var d=b.argToArray(arguments);return function(){var e=b.array.concat(d,b.argToArray(arguments));return a.apply(c,e)}}},this.localStorage=function(a,b){var c=function(){};return c.save=function(a,b,c){localStorage.setItem(a,JSON.stringify({value:b,expiredTime:c||999999999,storeTime:Date.now()}))},c.load=function(a){var b=localStorage.getItem(a);if(b=JSON.parse(b))return b.isFresh=b&&Date.now()-b.storeTime<b.expiredTime,b.isFresh||localStorage.removeItem(a),b.value=JSON.parse(b.value),b},c}(this),this.map=function(a,c,d){var e=[];return b.each(a,function(a,b,f){e.push(c.call(d,a,b,f))}),e},this.math=function(){var a={};return a.mod=function(a,b){return a-b*Math.floor(a/b)},a}(),this.mediaHandler=function(a){var b={"in":{},out:{},only:{},is:{},"if":{is:{not:{}}}},c={},e={},f={},g=[],h=function(b,c,e){var f=d.matchMedia(b.selector);f.addListener(function(){(f.matches?c:e||a.fn())()}),(f.matches?c:e||a.fn())()},i=function(a,b){var c=d.matchMedia(a);c.addListener(function(){!c.matches&&b()})},j=function(a,b){return b&&c[a.name]?b():f[a.name].matches},k=function(a){var b=d.matchMedia(a.selector);f[a.name]=b,b.addListener(function(){b.matches&&l([a])})};b.init=function(c){e=c;for(var d in e)k({name:d,selector:e[d]}),b["in"][d]=a.leftCurry(h)({name:d,selector:e[d]}),b.out[d]=a.leftCurry(i)({name:d,selector:e[d]}),b.only[d]=a.leftCurry(a.fn)({name:d,selector:e[d]}),b.is[d]=a.leftCurry(j)({name:d,selector:e[d]})};var l=function(a,b){if(b)b(a);else for(var b,c=0;b=g[c];c++)b(a)};return b.onChange=function(b,c){c=a.assignIfNotDefined(c,!0),g.push(b);var d=[];for(var h in f)f[h].matches&&d.push({name:h,selector:e[h]});c&&l(d,b)},b.getMatchesMedia=function(){var a=[];for(var b in f)f[b].matches&&a.push({name:b,selector:f[b].media});return a},b}(this),this.memoize=function(a){return a.cache||(a.cache={}),function(){for(var b=Array.prototype.slice.call(arguments),c="",d=b.length,e=null;d--;)e=b[d],c+=e===Object(e)?JSON.stringify(e):e;return c in a.cache?a.cache[c]:a.cache[c]=a.apply(this,b)}},this.merge=function(a,c){var d=b.cloneObj(a);return b.is.object(c)?b.each(c,function(a,b){d[b]=c[b]}):b.is.array(c)&&b.each(c,function(a){d.push(a)}),d},this.multiply=function(a,b){return a*b},this.nextTick=function(){var a=b.argToArray(arguments),c=a.shift(),d=a.shift();setTimeout(function(){c.apply(d,a)},0)},this.note=function(a){},this.object=function(a){var c=b.fn();return b.extend(new c,a)},this.objToTwoDimArray=function(){var a=b.argToArray(arguments),c=a[0],d=[];return b.each(c,function(a,b){var c=[];c[0]=[a],c[1]=[b],d.push(c)}),d},this._Observable={observers:[],lastId:-1,addObserver:function(a){return this.observers.push({callback:a,id:++this.lastId}),this.lastId},removeObserver:function(a){for(var b=this.observers.length-1;b>=0;b--)if(this.observers[b],this.observers[b].id==a)return this.observers.splice(b,1),!0;return!1},notifyObservers:function(a){for(var b=this.observers.length-1;b>=0;b--)this.observers[b].callback(a)}},this.Observable=function(a,b){function c(a){this.subsciber=[]}return c.prototype.observe=function(a){this.subsciber.push(a)},c.prototype.unobserve=function(a){for(var b=0,c=this.subsciber.length;b<c;b++)if(this.subsciber[b]===a)return this.subsciber.splice(b,1),!0;return!1},c.prototype.notify=function(){for(var a=Array.prototype.slice.call(arguments,0),b=0,c=this.subsciber.length;b<c;b++)this.subsciber[b].update.apply(null,a)},c.set=function(a){},c}(this),this.on=function(a,b,c){};var f={},g={};this.onScrollDown=function(a,b){g[a]=g[a]||[],g[a].push(b)},this.onScrollTop=function(a,b){f[a]=f[a]||[],f[a].push(b)},this.onscroll=function(a){var b=[];return d.onscroll=function(){e.each(b,function(a){a()})},function(a){b.push(a)}}(d.onscroll),this.onscroll(function(){var a=d.scrollY;e.each(f,function(b,c){c<a&&e.each(f[c],function(a){a()})}),e.each(g,function(b,c){c>a&&e.each(g[c],function(a){a()})})}),this.partial=function(a,d){c&&(b.is.not.object(a),b.is.not.defined(d));var e={};b.is.not.array(d)&&(d=b.report.skeleton(d));for(var f,g=0;f=d[g];g++){var h=f.split("."),i=h.shift(),j=[h.join(".")];c&&b.is.not.defined(a[i]),b.is.not.contain(f,"\\.")?e[f]=a[f]:b.is.contain(f,"\\.")&&(e[i]=b.assignIfNotDefined(e[i]||{}),e[i]=b.merge(e[i],b.partial(a[i],j)))}return e},this.pascalCase=function(a){return a=b.camelCase(a),a[0].toUpperCase()+a.substr(1,a.lenght)},this.pipe=function(a){var b={};return function(a,c){var a=a;return b[a]=b[a]||[],function(c){b[a].push(c)}}}(this),this.preventEvent=function(a){var b=a||d.event;b.preventDefault(),b.stopPropagation()},this.propByPrefix=function(a,c,d){d=b.assignIfNotDefined(d,!1);var e={};for(var f in a)if(0===f.search(c)){var g=d?b.camelCase(f.substr(c.length)):f;e[g]=a[f]}return e},this.prototype=function(a,b){var c=function(){};return c.extend=function(b,d){var e=a["if"].is.not["function"](b,function(){return a.get.constructor(b)},function(){return b});for(var f in d)d.hasOwnProperty(f)&&(e.prototype[f]=d[f]);return c},c.getConstruntorFunction=function(a){var b=function(){};return b.prototype=a,b},c}(this),this.publisher=function(a,c){var d={};return d.subscribers={any:[]},d.subscribe=function(a,c){c=c||"any";for(var d,e=b.spliteAndTrim(c),f=0;d=e[f];f++)b.is.not.defined(this.subscribers[d])&&(this.subscribers[d]=[]),this.subscribers[d].push(a)},d.unsubscribe=function(a,b){this.visitSubscribers("unsubscribe",a,b)},d.publish=function(a,c){c=b.assignIfNotDefined(c,{}),this.visitSubscribers("publish",c,a)},d.visitSubscribers=function(a,b,c){if(this.subscribers[c])for(var d,e=c||"any",f=this.subscribers[e],g=0;d=f[g];g++)"publish"===a?d(b):"unsubscribe"===a&&d==b&&f.splice(g,1)},function(a){a=a||{};var c;for(c in d)d.hasOwnProperty(c)&&b.is["function"](d[c])&&(a[c]=d[c]);return a.subscribers={any:[]},a}}(this),this.randColor=function(){var a=this.random(1,256).toFixed(),b=this.random(1,256).toFixed(),c=this.random(1,256).toFixed();return"rgb("+a+","+b+","+c+")"},this.randJson=function(a,c){var d=[];return b.repeat(a,function(){var a={};b.each(c,function(c){"string"==c.type?a[c.name]=b.randString(6):"number"==c.type&&(a[c.name]=b.random(0,9))},this),d.push(a)},this),d},this.random=function(a,b){return(b-a)*Math.random()+a},this.randString=function(a){var c="",d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";return b.repeat(a,function(){c+=d[b.random(0,d.length).toFixed()]},this),c},this.recursive=function(){},this.regex=function(a){var b={number:/\d+/g},c=a.fn;return c.match=function(a){return a.match(b.number)},c.matchFirst=function(a){return a.match(b.number)[0]},c.type=b,c}(this),this.regularCase=function(a){return a.replace(/([A-Z])/g," $1").replace(/^./,function(a){return a.toUpperCase()})},this.remove=function(a,d){return c&&(b.is.not.array(a)&&this.fail("is Not Array"),a.length<d&&this.fail("greeter that array length")),obj.length>d?obj.splice(d,len||1):null},this.removeEventArg=function(a){b.each(a,function(c,d){c.currentScope&&c.targetScope&&b.remove(a,d)},this)},this.repeat=function(a,b,c){for(var d=[],e=0;e<a;e++)d.push(b.call(c));return d},this.replaceInArray=function(a,b,c){Array.prototype.splice.apply(a,[b,c.length+b].concat(c))},this.report=function(a){var b=function(b,c,d){var c=c||0,d=d||"",f={},g=[];if(c++,a.is.object(b)){f={};for(var h in b){var i=a.is.array(b[h]),j=a.is.object(b[h]),k=d?d+"."+h:h;f.name=h,f.path=k,f.depts=c,f.type="value",f.isLastNode=!(i||j),a.is.object(b[h])&&(f.type="object"),a.is.array(b[h])&&(f.type="array"),g.push(a.cloneObj(f)),j&&(g=g.concat(e.report(b[h],c,k))),i&&(g=g.concat(e.report(b[h][0],c,k)))}}return g};return b.skeleton=function(c){return a.array.compact(a.map(b(c),function(a){return!!a.isLastNode&&a.path}))},b}(this),this.rightCurry=function(a){return function(b){return function(){var c=a.argToArray(arguments);return function(){var d=a.array.concat(e.argToArray(arguments),c);return b.apply(a,d)}}}}(this),this.runInFunc=function(a){return this.is.not["function"](a)&&this.warn(a+"is not function"),function(){a()}},this.safeAssignArray=function(a,b){this.replaceInArray(a,0,b)},this.safeClear=function(a){if(b.is.array(a))Array.prototype.splice.apply(a,[0,a.length].concat([]));else for(var c in a)a.hasOwnProperty(c)&&delete a[c]},this.scope=function(){var a=function(){this.fn=new function(){},this.data=new function(){},this.config=new function(){},this.option=new function(){},this.event=new function(){},this.module=new function(){},this["const"]=new function(){}};return new a},this.scroll=function(){var a=function(){};return a.to=function(a,c,e){var f=b.selectFirst(a);if(!(e<0)){var g=c-d.pageYOffset,h=g/e*10;setTimeout(function(){var a=d.pageYOffset+h;d.scrollTo(0,a),f.scrollTop!==c&&b.scroll.to(f,c,e-10)},10)}},a}(),this.setValue=function(c,d,e){if(!c)return a;if(!c)return this.warn("Utility getValue function first parameter not defined");var e=e.split(".");if(1==e.length)return c[e]=d,c;for(var f=e.shift(),g=c[f];e.length>1;)f=e.shift(),g[f]=g[f]||{},g=g[f],b.is.array(g)&&b.each(g,function(a){b.setValue(a,d,e.join("."))});return g[e[0]]=d,c},this.sortBy=function(a,c,d){return b.is["function"](c)?a.sort(c):"string"==c?a.sort(function(a,c){var e=b.getValue(a,d).toUpperCase(),f=b.getValue(c,d).toUpperCase();return e<f?-1:e>f?1:0}):"number"==c?a.sort(function(a,c){return b.getValue(a,d)>b.getValue(c,d)?1:-1}):void 0},this.spliteAndTrim=function(a){return b.trim(a).split(/[\s,]+/)},this.strStartsWith=function(a,b){return 0===a.indexOf(b)},this.subSet=function(a,b){},this.transitionCallback=function(a,b){var c=this.getTransitionEvent(),d=function(){b(),a.removeEventListener(c,d)};a.addEventListener(c,d)},this.trim=function(a){return a.replace(/^\s+|\s+$/g,"")},this.underscoreCase=function(a){return a.replace(/([A-Z])|([\W|\_])/g,function(a,b,c,d,e){return/[\w]/.test(a)?/[\w]/.test(a&&0==d)?a.toLowerCase():/[\w]/.test(a)?"_"+a.toLowerCase():"_":"_"})},this.uniqueId=function(a){var b={},c=function(a,c,d){b[a]=b[a]||1,b[a]=b[a]+1;var e=d?d(b[a]):b[a];return[a,e].join(c||"_")};return c}(this),this.update=function(c,d,e){return b.is.object(d)&&b.each(c,function(b,e){d[e]!==a&&(c[e]=d[e])}),c},this.upsert=function(a,d,f,g){c&&debugMode&&b.is.not.array(a);var h=!0;b.each(a,function(b,c){f(b)&&(h=!1,e.safeAssign(a[c],d))});h&&a.push(d)},this.verify=function(d,e){c&&(b.is.not.object(d)&&b.fail("is Not Object"),b.is.not.object(e)&&b.fail("is Not Object"),b.haveKey(e,"key")&&b.haveKey(e,"condition")&&b.haveKey(e,"value")||b.fail("dont have correct comparator attrs"));var f=d[e.key];return f!==a&&b.compare(f,e.condition,e.value)},this.warn=function(b){return a},this.warn=function(b){return a}};return{install:function(){return b?b:new e},installTo:function(a){return"[object Object]"===Object.prototype.toString.call(a)?e.call(a):d[a]=this.install()}}}(),"undefined"!=typeof module&&module.exports?exports=module.exports=d.SUTILITY.install():d.SUTILITY=SUTILITY}).call();
//# sourceMappingURL=sutility.node.min.js.map